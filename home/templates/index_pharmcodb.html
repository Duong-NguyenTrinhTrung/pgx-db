{% extends "home/base.html" %}
{% load static %}

{% block add_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'home/css/cookies_consent.css' %}" />
    <style>
        #cookie-consent-banner.col-md-12
        {
            background-color: #e5e5e5;
            margin: 20px 20px 0;
            padding-bottom: 7px;
        }
    </style>
{% endblock %}


{% block content %}

    <!-- Carousel -->
    <div class="row">

        <div class='col-md-12'>
            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" data-interval="30000">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="3"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="4"></li>
                    
                </ol>

                <!-- Wrapper for carousel slides -->
                <div class="carousel-inner" role="listbox">

                    <!-- Carousel items -->
                    <div class="item active">
                        <img style="height: 300px; " src="{% static 'home/carousel/vep and plot.png' %}">
                        <div class="carousel-caption">
                            <h4><a href="/gene/gene_detail/ENSG00000138075/">Variant effect prediction scores</a></h4>
                            <p>Collection of variant effect prediction for interested targets</p>
                        </div>
                    </div>
                    
                    <div class="item">
                        <img  style="height: 300px; " src="{% static 'home/carousel/drug-and-target-network.png' %}">
                        <div class="carousel-caption">
                            <h4><a href="{% url 'drug-lookup' %}" target="_blank">Drugs</a>, <a href="{% url 'target-lookup' %}" target="_blank">Targets</a> and <a href="{% url 'disease-lookup' %}" target="_blank">Disease</a></h4>
                            <p>Tripartite network of drugs, targets and disease</p>
                        </div>
                    </div>

                    <div class="item">
                        <!-- <img style="height: 300px; " src="{% static 'home/carousel/atc_level_network_statistics.png' %}"> -->
                        <img style="height: 300px; " src="{% static 'home/carousel/atc-code-browsing.png' %}">
                        <div class="carousel-caption">
                            <h4><a href="">ATC level network statistics</a></h4>
                            <p>Interaction network at an ATC level</p>
                        </div>
                    </div>
                    
                    
                    <div class="item">
                        <img style="height: 300px; " src="{% static 'home/carousel/target-statistics.png' %}">
                        <div class="carousel-caption">
                            <h4><a href="">Statistics</a></h4>
                            <p>Drug, protein and variant statistics</p>
                        </div>
                    </div>
                    
                    <div class="item">
                        <img style="height: 300px; " src="{% static 'home/carousel/variant-and-structure.png' %}">
                        <div class="carousel-caption">
                            <h4><a href="">Variants</a> and <a href="">Structures</a></h4>
                            <p>Variants and their reflection on structures</p>
                        </div>
                    </div>
                    <!-- Controls -->
                    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>

        </div>

    </div>

    
    <div class="row">
        <div  class="col-md-9">
            <!-- PGx intro -->
            <div class="panel panel-primary" >
                <div style="width: 100%; padding: 0;" class="panel-body">
                    <div class="col-md-4" >
                        <p style='text-align:center; font-size: 32px; margin:20px 0; font-weight: 700; padding: 0;'>
                            <strong>PGxDB</strong> 
                        </p>
                        <p style='text-align:center; padding: 0;'>
                            <img style="width: 50%; height: 40.3%;" src="{% static 'home/logo/PGx/main10.png' %}">
                        </p>
                    </div>
                    <div class="col-md-4" id='center_menu'>
                        <p style='text-align:justify; margin-top: 20px;'>
                            <strong><em>PGxDB (Pharmacogenomics database) </em></strong>is a one-stop shop
                            for pharmacogenomics research offering:<br/>
                            <ul>
                              <li>Reference data (see Data box)</li>
                              <li>Tools to to compare and customize analysis on high-level indication areas, find and interlink diverse variant effect predictions, associate these to annotated drug response variability associations and interrogate disease or medication associations </li>
                              <li>Tools explore relationship between ATC-level indexed medications, their molecular target profiles in terms of metabolizing enzymes, transporters, and drug targets</li>
                            </ul>
                        </p>
                    </div>
                    
                    <div class="col-md-4" id='center_menu'>
                        <p style='text-align:justify; margin-top: 20px;'>Data in PGxDB can be accessed by
                                <ul>
                                    <li>Any drug</li>
                                    <li>Target, enzyme, or transporter</li>
                                    <li>Disease</li>
                                    <li>Variant</li>
                                    <!-- <li>Adverse reaction</li> -->
                                </ul>
                        </p>
                    </div>

                </div>
            </div>

            <!-- pieChart HTML Code -->
            <div style=" width : 100%;  margin-bottom: 20px;" >
                <div class="container-fluid mt-2 col-12">
                    <div class="row">
                        <div class="col-md-3 col-sm-12">
                            <div class="card custom-card">
                                <div class="card-body text-center">
                                    <h4 class="card-title">Drug Anatomical Groups</h4>
                                    <!--PieChart Code here-->
                                    <div id="chart-container3">
                                        <svg id="pie-chart-ATC"></svg>
                                    </div>
                                    <!--PieChart End here-->
                                </div>
                            </div>
                        </div>
                                                
                        <div class="col-md-3 col-sm-12">
                            <div class="card custom-card">
                                <div class="card-body text-center">
                                    <h4 class="card-title">Drug Clinical Statuses</h4>
                                    <!--PieChart Code here-->
                                    <div id="chart-container2" >
                                        <svg id="pie-chart-drugs"></svg>
                                    </div>
                                    <!--PieChart End here-->
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3 col-sm-12">
                            <div class="card custom-card">
                                <div class="card-body text-center">
                                    <h4 class="card-title ">Protein Super Families</h4>
                                    <!--PieChart Code here-->
                                    <div id="chart-container1" >
                                        <svg id="pie-chart-proteins"></svg>
                                    </div>
                                    <!--PieChart End here-->
                                </div>
                            </div>
                        </div> 
                       
                        <div class="col-md-3 col-sm-12">
                            <div class="card custom-card">
                                <div class="card-body text-center">
                                    <h4 class="card-title ">Drug-protein Interaction Modes</h4>
                                    <!--PieChart Code here-->
                                    <div id="chart-container4" >
                                        <svg id="pie-chart-mutations"></svg>
                                    </div>
                                    <!--PieChart End here-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- pieChart HTML End Here Code -->

            <!-- Related resources -->
            <!-- Why pharmacogenomics? -->
            <div class="col-md-4">
                <div class="panel panel-primary">
                    <div class="panel-body">
                        <h3>Why pharmacogenomics?</h3>
                        <div style='max-height: 470px; overflow-y: scroll;'>
                            <p>
                            <strong style="color: grey;">Trends in GPCR drug discovery: new agents, targets and indications. </strong><br />
                            Hauser, A. S., Attwood, M. M., Rask-Andersen, M., Schiöth, H. B., & Gloriam, D. E. (2017). <br />
                            <a href ='https://www.nature.com/articles/nrd.2017.178' target='_blank'><i>Nature reviews Drug discovery</i>, 2017, 16(12), 829-842.</a><br />
                            </p>
                            <p>
                            <strong style="color: grey;">PGxDB: an interactive web-platform for pharmacogenomics research.  </strong><br />
                            Duong Nguyen, T. T., Tanoli, Z., Hassan, S., Özcan, U. O., Caroli, J., Kooistra, A. J., … & Hauser, A. S. (). <br />
                            <a href ='https://academic.oup.com/nar/article/53/D1/D1486/7829606' target='_blank'><i>Nucleic Acids Research</i> 2025 , 53(D1), D1486-D1497.</a><br />
                            </p>
                        </div>
                        <div style='height: 30px; margin-top: 10px; position: relative;'>
                        <span style="position: absolute; bottom 0;"><strong><a href="https://pgx-documentation.readthedocs.io/en/latest/citing_pgxdb.html" role="button" id='cite_gpcrdb_pubs'>Citing PGxDB</a></strong></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4" >
                <div class="panel panel-primary">
                    <div class="panel-body">
                        <h3>Related resources</h3>
                        <a href='https://go.drugbank.com/' target='_blank'>Drugbank</a>, 
                        <a href='https://app.genebass.org/' target='_blank'>Genebass</a>,
                        <a href='https://www.pharmgkb.org/' target='_blank'>PharmgKB</a>, 
                        <a href='https://www.ensembl.org/' target='_blank'>Ensembl</a>, 
                        <a href='https://www.ebi.ac.uk/chembl/' target='_blank'>ChEMBL</a>, 
                        <a href='https://www.uniprot.org/' target='_blank'>UniProt</a>, 
                        <a href='https://www.ncbi.nlm.nih.gov/datasets/genome/GCF_000001405.26/' target='_blank'>GRCh38</a>, 
                        <a href='https://clinicaltrials.gov/' target='_blank'>ClinicalTrials.Gov</a>, 
                        <a href='http://sideeffects.embl.de/' target='_blank'>SIDER</a>, 
                        <a href='https://www.disgenet.com/' target='_blank'>DisGeNet</a>, and  
                        <a href='https://repurposedrugs.org/' target='_blank'>RepurposeDrugs</a>, 
                        cover related aspects of how genetic variants affect drug metabolism and drug response.
                        {% if users %}
                        {{ users|safe }}
                        {% endif %}
                        <br />
                        <br />
                    </div>
                </div>
            </div>

            <!-- Release Notes -->
            <div class="col-md-4" >
                <div class="panel panel-primary" id='releases'>
                    <div class="panel-body">
                        <h3>Release & Accessibility </a></h3>
                        <br />
                        <strong>First release: </strong><span>to be in Aug-2024</span>
                        <br /> 
                        <strong>Accessibility: </strong><span>This website is freely accessible to all users</span>
                    </div>
                </div>
            </div>
        </div>

        
        <div class="col-md-3">
            <!-- Introduction video -->
            <div class="panel panel-primary" id='intro-video'>
                <div class="panel-body">
                    <h3>Introduction video</h3>
                    <a href="https://www.youtube.com/watch?v=RXmrUhSSSlo" target="_blank"><img style="width: 100%;align:center;" src="{% static '/home/images/youtube_intro_image2.png' %}". ></img></a>
                    <!-- <h3><a href="https://files.gpcrdb.org/video/GPCRdb-David_Gloriam.mp4">Videos</a></h3> -->
                </div>
            </div>
            
            <!-- Stats -->
                <div class="panel panel-primary">
                    <div class="panel-body">
                        <h3>Data</h3>
                        <ol class="olcards">
                            <li style="--cardColor:#fc374e">
                              <div class="content">
                                <div class="title">6,504</div>
                                <div class="text" id="drug-data">Drugs (3,676 with ATC codes) <br/> </div>
                              </div>
                            </li>
                            <li style="--cardColor:#7678ed">
                              <div class="content">
                                <div class="title">~1,600</div>
                                <div class="text" id="disease-data">Indications (diseases) associated with ~1,800 drugs in ~19,000 associations <br/> </div>
                              </div>
                            </li>
                            <li style="--cardColor:#38b000">
                              <div class="content">
                                <div class="title">2,969</div>
                                <div class="text">Interacting proteins spanning 22,909 drug-protein interactions</div>
                              </div>
                            </li>
                            <li style="--cardColor:#0466c8">
                              <div class="content">
                                <div class="title">~1,3 mil</div>
                                <div class="text">Unique genetics variants (~5,200 influencing drug responses)</div>
                              </div>
                            </li>
                            <li style="--cardColor:#f15f0e">
                              <div class="content">
                                <div class="title">4,897,436</div>
                                <div class="text">Variant effects from > 40 algorithms</div>
                              </div>
                            </li>
                            <li style="--cardColor:#db9d47">
                              <div class="content">
                                <div class="title">2,022,419</div>
                                <div class="text">Gene-based association statistics burden test scores</div>
                              </div>
                            </li>
                            <li style="--cardColor:rgb(88, 44, 77)">
                              <div class="content">
                                <div class="title">2,651,948</div>
                                <div class="text">Variant-based association statistics burden test scores</div>
                              </div>
                            </li>
                        </ol>

                    </div>
                </div>
        </div>
    </div>

    

    <!-- Cookies consent  -->
    <div id="cookie-consent-banner" class="row" style="margin-bottom: 20px;">
        <div class="col-md-12" >
            <p style="text-align: center;";>We use cookies to enhance your browsing experience and analyze our traffic. By continuing to visit this site you agree to our use of cookies. <a href="https://www.aboutcookies.org/" target="_blank">Learn more</a></p>
            <div style="display: flex; justify-content: center; gap: 10px;">
                <button id="accept-cookies">Accept</button>
                <button id="decline-cookies">Decline</button>
            </div>
        </div>
    </div>
{% endblock %}

{% block addon_js %}
    <!-- <script src="https://d3js.org/d3.v7.min.js"></script>        -->
    <script src="{% static 'home/js/d3.v7.min.js' %}"></script>       
    <script src="{% static 'home/js/piechart.js' %}"></script>
    <script src="{% static 'home/js/cookies_script.js' %}"></script>
{% endblock %}
